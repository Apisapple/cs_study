---
tags:
  - Architecture
date: 2024-03-14
---
# 무상태 웹계층

 웹 계층을 수평적으로 확장하기 위해서 상태 정보(사용자의 session, 데이터 등)의 정보를 웹 계층에서 제거하여야 한다.
 이러한 방법으로 상태 정보를 cache, NoSQL같은 지속성 저장소에 보관하고 이를 필요할 때 가져오도록 구성된 웹 계층을 무상태(stateless) 웹 계층이라 말한다.

## 상태 의존적인 아키텍쳐

![[Pasted image 20231218015147.png]]

위의 상태처럼 각 사용자가 하나의 서버로 session 정보가 묶여있는 형태

대부분의 load balancer는 sticky session 기능을 제공하는데, 이는 load balancer에 부담을 주고 서버를 추가하는 과정에서 부담을 줄 수 있음.
## 개선된 아키텍쳐

![[Pasted image 20231218015532.png]]

상태 정보는 웹 서버로부터 물리적으로 분리되어있다.  
이런 구조는 아주 단순하고, 안정적이며, 규모 확장에 쉽다는 장점이 있다.  
  
session 데이터를 웹 계층으로부터 분리하고 공유 저장소에 보관한다.  
이때 공유 저장소는 RDBMS일 수도 있고, Memcached/Redis 같은 cache 시스템일 수도 있으며, NoSQL일 수도 있다.